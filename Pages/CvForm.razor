@page "/cvform"
<h3>Make Your Great CV!</h3>

<div class="progress">
    <div class="progress-bar" role="progressbar" style="width: @progressBarPercentage%;" aria-valuenow="@progressBarPercentage" aria-valuemin="0" aria-valuemax="100"></div>
</div>

<div class="mx-auto col-sm-12 col-md-10 col-lg-8">

    @switch (CurrentState)
    {
        case State.personalData:

            <div class="@PageAnimation[0] col-sm-12 col-md-7 col-lg-4 mx-auto my-5">
                <p class="font-weight-light lead">Your personal info</p>
                <div class="form-group">
                    <label asp-for="CvDataItem.Name">Name</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="form-group">
                    <label asp-for="CvDataItem.Surname">Surname</label>
                    <input type="text" class="form-control" placeholder="">
                </div>
                <div class="form-group">
                    <label asp-for="CvDataItem.Email">Email address</label>
                    <input type="email" class="form-control" placeholder="Enter email">
                </div>
                <div class="form-group">
                    <label asp-for="CvDataItem.PhoneNumber">Phone Number</label>
                    <input type="tel" class="form-control" aria-describedby="phoneEmailHelp" placeholder="Enter 9 digits number">
                    <small id="phoneEmailHelp" class="form-text text-muted">We'll never share your data with anyone else. It's used for your future employer!</small>
                </div>

                <button @onclick="NextPage" class="btn btn-primary">Next</button>
            </div>

            break;
        case State.experience:
            <div class="@PageAnimation[1] col-sm-12 col-md-7 col-lg-4 mx-auto my-5">
                <p class="font-weight-light lead">Your Experience</p>
                <button @onclick="PreviousPage" class="btn btn-primary">Previous</button>
                <button @onclick="NextPage" class="btn btn-primary">Next</button>
            </div>
            break;

        case State.education:
            <div class="@PageAnimation[2] col-sm-12 col-md-9 col-lg-5 mx-auto my-5">
                <p class="font-weight-light lead">Your Education</p>

                @foreach (var education in educations)
                {
            <div class="fade-in">
                <label asp-for="CvDataItem.Education.Name">School Name</label>
                <input type="text" @bind="education.Name" class="form-control input-group" placeholder="">
                <label asp-for="CvDataItem.Education.From">Started</label>
                <input type="date" @bind="education.From" class="form-control input-group" placeholder="Enter school starting date">
                <label asp-for="CvDataItem.Education.To">Finished</label>
                <input type="date" @bind="education.To" class="form-control input-group" placeholder="Enter graduation/ date">

                <label asp-for="CvDataItem.Education.Degree">Degree/School level</label>
                <select class="form-control input-group" id="exampleFormControlSelect1">
                    <option>Middle school</option>
                    <option>High school</option>
                    <option>Bachelor of Arts (BA)</option>
                    <option>Bachelor of Science (BSc)</option>
                    <option>Master's degree</option>
                    <option>Master of Business Administration (MBA)</option>
                </select>

                <label asp-for="CvDataItem.Education.To">Additional info (optional)</label>
                <input type="text" @bind="education.Description" class="form-control input-group" placeholder="...">
                <button @onclick="@(e => educations.Remove(education))" class = "btn btn-danger my-3">Delete this school</button>
            </div>
                }
            <div class="my-3">
                <button @onclick="AddEducation" class="btn btn-success">Add school</button>
                <button @onclick="PreviousPage" class="btn btn-primary">Previous</button>
                <button @onclick="NextPage" class="btn btn-primary">Next</button>
            </div>
            </div>
            break;
        case State.summary:
            <div class="@PageAnimation[3] col-sm-12 col-md-7 col-lg-4 mx-auto my-5">
                <p class="font-weight-light lead">Summary</p>
                <button @onclick="PreviousPage" class="btn btn-primary">Previous</button>
                <button @onclick="NextPage" class="btn btn-primary">Finish</button>
            </div>
            break;
        default:
            break;
    }
</div>

@code {


    private string[] PageAnimation = { "slide-in-right", "slide-in-right", "slide-in-right", "slide-in-right" };
    public enum State { personalData, experience, education, summary };
    [Parameter]
    public State CurrentState { get; set; } = State.personalData;
    private int progressBarPercentage = 0;

    private string Name { get; set; }
    private string Surname { get; set; }
    private string Email { get; set; }
    private string PhoneNumber { get; set; }
    [Parameter]
    public IList<CvDataItem.Education> educations { get; set; } = new List<CvDataItem.Education>();
    private IList<CvDataItem.Experience> experiences { get; set; } = new List<CvDataItem.Experience>();
    private IList<CvDataItem.Skill> skills { get; set; } = new List<CvDataItem.Skill>();


    private void NextPage(MouseEventArgs e)
    {
        PageAnimation[(int)CurrentState] = "fade-in";
        CurrentState++;
        progressBarPercentage = (int)CurrentState * 25;
    }

    private void PreviousPage(MouseEventArgs e)
    {
        PageAnimation[(int)CurrentState] = "slide-in-right";
        CurrentState--;
        progressBarPercentage = (int)CurrentState * 25;
    }

    private void AddEducation(MouseEventArgs e)
    {
        educations.Add(new CvDataItem.Education());
    }


}
